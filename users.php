<?phpob_start();define('SZINT', 666);require_once('rendszer/mag.php');$belep = new belep();$old = new old();$lapozo = new lapozo($_SERVER['REQUEST_URI'], 20);db::futat("SELECT DISTINCT(UPPER(SUBSTRING(name, 1, 1))) AS betu FROM users ORDER BY betu");$betuk = db::tomb('betu');$smarty->assign('betuk', $betuk);switch(true) {	case !empty($g['betu']) || isset($g['betu']):		$where = "name LIKE '" . $g['betu'] . "%'";		$order = "name";	break;	case !empty($g['keres']):		$mit = str_replace('*', '%', $g['keres']);		$mit = str_replace('?', '_', $mit);		$where = "name LIKE '" . $mit . "'";		$order = "name";	break;	default:		$where = "rang IN(1,2,3,4)";		$order = "rand()";	break;}$sql = "SELECT SQL_CALC_FOUND_ROWS uid FROM users WHERE " . $where . " ORDER BY " . $order . " LIMIT " . $lapozo->limitalo();	db::futat($sql);$uidk = db::tomb('uid');db::futat("SELECT FOUND_ROWS() AS id");$max = db::sor();$usersek = array();foreach($uidk as $u) {		$usersek[] = User::load($u);}$smarty->assign('adat', $usersek);$lapozo->max = $max;$smarty->assign('lapozo', $lapozo->szamsor());$smarty->assign('betuvel', $lapozo->betuvel());$smarty->assign('selectbe', $lapozo->selectbe());$smarty->assign('OLDAL', $OLDAL);$smarty->display('users.tpl');ob_end_flush();?>